<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.gstatic.com"> 
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/main.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<script src="https://unpkg.com/vue@next"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<title>NSYSU Campus Bus</title>
</head>
<body>
    <div id="app"></div>
    <script>
    const stopNameList = {
        "Administration Square":{"tw":"行政大樓","cn":"行政大楼","en":"Administration Building","jp":"行政棟"},
        "Administration Building":{"tw":"行政大樓","cn":"行政大楼","en":"Administration Building","jp":"行政棟"},
        "Dorm H":{"tw":"H棟宿舍","cn":"H栋宿舍","en":"H Dormitory","jp":"H ドーミトリー"},
        "H Dormitory":{"tw":"H棟宿舍","cn":"H栋宿舍","en":"H Dormitory","jp":"H ドーミトリー"},
        "Activity Center":{"tw":"活動中心","cn":"活动中心","en":"Activity Center","jp":"アクティビティセンター"},
        "Wuling Road":{"tw":"武嶺路口","cn":"武岭路口","en":"Wuling Road","jp":"武嶺交差点"},
        "College of Liberal Arts":{"tw":"文學院","cn":"文学院","en":"College of Liberal Arts","jp":"文学院"},
        "MRT Sizihwan Station (LRT Hamasen Station)":{"tw":"捷運西子灣站 (輕軌哈瑪星站)","cn":"捷运西子湾站(轻轨哈玛星站)","en":"MRT Sihziwan Station (LRT Hamasen Station)","jp":"MRT西子湾駅(LRT哈瑪星駅)"},
        "未行駛":{"tw":"未行駛","cn":"未行驶","en":"Not in service","jp":"運休"},
    };

        const app = Vue.createApp({
            template: '<app-title :lang-code="langCode" /z>{{langCode}}<app-content /><app-navigator :lang-code="langCode" />',
            data(){
                return {
                    currentPage: 0,
                    langCode: "tw"
                }
            },
            provide(){
                return {
                    currentPageChild: Vue.computed(() => this.currentPage),
                    langChild: Vue.computed(() => this.langCode)
                }
            }
        });
        app.component('app-title',{
            template: '<div class="banner shadow"><div id="title">{{titleContent}}</div></div>',
            data(){
                return {
                    titleContent: ""
                }
            },
            props: ['language'],
            methods: {
                getLang(){
                    var dict = {"tw":"校園公車資訊","cn":"校园公交信息","en":"Campus Bus Information","jp":"学内連絡バスインフォ"};
                    this.titleContent = dict[this.language];
                    console.log(this.language);
                }
            },
            beforeMount(){
                this.getLang();
            },
            beforeUpdate(){
                this.getLang();
            }
        });
        app.component('app-content',{
            template: '<div></div>'
        });
        app.component('app-navigator',{
            template :'<div class="navigator shadow"><a href="" ><span class="material-icons">school</span><br>{{campus}}</a><a href="" ><span class="material-icons">directions_bus</span><br>{{city}}</a><a href="" ><span class="material-icons">departure_board</span><br>{{timetable}}</a><a href="" ><span class="material-icons">settings</span><br>{{settings}}</a></div>',
            data(){
                return {
                    campus: "",
                    city: "",
                    timetable: "",
                    settings: ""
                }
            },
            props: ['language'],
            methods: {
                getLang(){
                    const campusButton = {"tw": "校園公車","cn": "校园公交","en": "Campus Bus","jp": "学内連絡バス"};
                    const cityButton = {"tw": "市區公車","cn": "市区公交","en": "City Bus","jp": "市内バス"};
                    const timetableButton = {"tw": "時刻表","cn": "时刻表","en": "Timetable","jp": "時刻表"};
                    const settingsButton = {"tw": "設定","cn": "设置","en": "Settings","jp": "設定"};
                    this.campus = campusButton[this.language];
                    this.city = cityButton[this.language];
                    this.timetable = timetableButton[this.language];
                    this.settings = settingsButton[this.language];
                }
            },
            mounted(){
                this.getLang();
            },
            beforeUpdate(){
                this.getLang();
            }
        });
        app.mount('#app');
        $("#header").height($(".banner").outerHeight());
        $("#footer").height($(".navigator").outerHeight());
    </script>
</body>
</html>